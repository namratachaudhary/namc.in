<!doctype html><html lang=en><head><meta charset=utf-8><meta name=generator content="Hugo 0.64.1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="__namc"><meta property="og:url" content="/posts/cloud-observability-ii/"><link rel=canonical href=/posts/cloud-observability-ii/><link rel=alternate type=application/atom+xml href=/index.xml title="Namc's blog"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"\/"},"articleSection":"posts","name":"Using the right tools for an Observable Kubernetes Cluster","headline":"Using the right tools for an Observable Kubernetes Cluster","description":"In the last part, we saw commonly used terms and tools in CNCF landscape for making your Cloud Infrastructure observable. In this section we will read about how we can use those concepts and handful of tools to get started.\nCreating a very basic and bare-minimum observable infrastructure Considering that the system engineer is somewhat well-versed with cloud-friendly observability tools, let’s look at some tools that can help lay-down a sound foundation for system observability","inLanguage":"en-US","author":"__namc","creator":"__namc","publisher":"__namc","accountablePerson":"__namc","copyrightHolder":"__namc","copyrightYear":"2020","datePublished":"2020-05-12 06:25:12 \x2b0200 \x2b0200","dateModified":"2020-05-12 06:25:12 \x2b0200 \x2b0200","url":"\/posts\/cloud-observability-ii\/","keywords":["Devops"]}</script><title>Using the right tools for an Observable Kubernetes Cluster - Namc's blog</title><meta property="og:title" content="Using the right tools for an Observable Kubernetes Cluster - Namc's blog"><meta property="og:type" content="article"><meta property="og:description" content="In the last part, we saw commonly used terms and tools in CNCF landscape for making your Cloud Infrastructure observable. In this section we will read about how we can use those concepts and handful of tools to get started.
Creating a very basic and bare-minimum observable infrastructure Considering that the system engineer is somewhat well-versed with cloud-friendly observability tools, let’s look at some tools that can help lay-down a sound foundation for system observability"><meta name=description content="In the last part, we saw commonly used terms and tools in CNCF landscape for making your Cloud Infrastructure observable. In this section we will read about how we can use those concepts and handful of tools to get started.
Creating a very basic and bare-minimum observable infrastructure Considering that the system engineer is somewhat well-versed with cloud-friendly observability tools, let’s look at some tools that can help lay-down a sound foundation for system observability"><meta property="og:locale" content="en-us"><link rel=stylesheet href=/css/flexboxgrid-6.3.1.min.css><link rel=stylesheet href=/css/github-markdown.css><link rel=stylesheet href=/css/highlight/tomorrow.min.css><link rel=stylesheet href=/css/index.css><link href=/index.xml rel=alternate type=application/rss+xml title="Namc's blog"><link href="https://fonts.googleapis.com/css?family=Arvo|Permanent+Marker|Bree+Serif" rel=stylesheet></head><body><article class=post id=article><div class=row><div class=col-xs-12><div class=site-header><header><div class="signatures site-title"><a href=/>__namc</a></div></header><div class="row end-xs"></div><div class=header-line></div></div><header class=post-header><h1 class=post-title>Using the right tools for an Observable Kubernetes Cluster</h1><div class="row post-desc"><div class=col-xs-6><time class=post-date datetime="2020-05-12 06:25:12 +0200">12 May 2020</time></div><div class=col-xs-6><div class=post-author><a target=_blank href=https://namc.in/>@__namc</a></div></div></div></header><div class="post-content markdown-body"><p>In the <a href=https://namc.in/posts/cloud-observability/>last part</a>, we saw commonly used terms and tools in CNCF landscape for making your Cloud Infrastructure observable. In this section we will read about how we can use those concepts and handful of tools to get started.</p><h2 id=creating-a-very-basic-and-bare-minimum-observable-infrastructure>Creating a very basic and bare-minimum observable infrastructure</h2><p>Considering that the system engineer is somewhat well-versed with cloud-friendly observability tools, let’s look at some tools that can help lay-down a sound foundation for system observability</p><h3 id=prometheushttpsprometheusio><a href=https://prometheus.io/>Prometheus</a></h3><p><strong>to scrape data from K8S resources</strong></p><p>A good practice would be to use observable containers (application containers that push metrics to an endpoint). A lot can be automated with CR auto discovery from the Prometheus Operator. If you are using helm charts, this is already enabled by default. Prometheus provides an interface for querying metrics (PromQL)</p><p>Deploy using Prometheus operator :</p><ul><li>simplifies configuration by using CRDs to define the jobs and rules.</li><li>far easier to maintain configurations in a bunch of small files, rather than a monolithic config with multiple scrapes.</li><li>adds common components (node-exporter, kube-state-metrics, grafana, etc).</li></ul><h3 id=victoriametricshttpsvictoriametricscom--thanoshttpsthanosiogetting-startedmd><a href=https://victoriametrics.com/>VictoriaMetrics</a> / <a href=https://thanos.io/getting-started.md/>Thanos</a></h3><p><strong>for storing all historical metrics data</strong></p><p>Prometheus stores data on disk, therefore you can assume that your metric data will be short lived. Victoria Metrics and Thanos is built on top of Prometheus and stores all your historical metric data for unlimited time Compatible with PromQL therefore, it can be used to generate visualizations on Grafana using the same queries as that for Prometheus. It exposes a &ldquo;master Prometheus&rdquo; to scrape data from all Prometheus instances.</p><p>Some tangential but necessary advantages include - high availability, querying across instances, long-term block storage, query-level downsampling</p><h3 id=grafana>Grafana</h3><p><strong>to visualize metrics data and logs</strong></p><p>Grafana lays out the metrics in visual appeasing manner using templates provided (proprietary, OSS). Grafana integrates beautifully with Prometheus and it is compatible with PromQL. You can build custom charts using PromQL and combine multiple metrics across applications.</p><p>Grafana is a state of the art visualization tool in the industry, and open source too. It integrates with plenty of other tools, thereby making it a one-stop shop for all visualization needs.</p><h3 id=lokihttpsgithubcomgrafanaloki><a href=https://github.com/grafana/loki>Loki</a></h3><p><strong>for building a logging framework</strong></p><p>This tool is absolutely necessary if you want to process log files. However, it does not index log files [like ElasticSearch] but indexes metadata.</p><p>If you don&rsquo;t need Fulltext indexing, and grepping your logs is sufficient use case, go for <code>loki</code>. It will be fast, reliable, already well integrated in kubernetes and managed easier. It is also compatible with Grafana, hence no need for additional visualization tools.</p><h3 id=fluentdhttpswwwfluentdorg><a href=https://www.fluentd.org/>Fluentd</a></h3><p><strong>for collecting all your logs</strong></p><p>A log collector to gather all kinds of logs and translate them to JSON. It enables other systems to seamlessly work with the data.</p><p>There are multiple options to setup Fluentd with your system -</p><ul><li>setup a logfile watcher as input, which sends the log messages over to a logfile writer on another machine, all within 5..10 minutes on 2 VMs.</li><li>directly write messages (JSON or MessagePack) to a TCP socket (MessagePack-formatted messages to TCP socket is basically the lowest level you get).</li></ul><p>It&rsquo;s basically just input plugins connected to output plugins, and you build a message distribution network from that.</p><p>Fluentd is automatically installed by Google on their GKE instances.</p><h3 id=kubecosthttpskubecostcom><a href=https://kubecost.com/>KubeCost</a></h3><p><strong>to determine how much your kubernetes resources are costing you</strong></p><p>KubeCost provides cost allocation models for kubernetes workloads across various cloud providers. In a shared cluster, it helps in linking the costs to the resources and link that to users/teams. This also helps in being able to estimate, analyse, and create accurate reporting on costs</p><p>This is truly essential for firms that operate on a budget and need more visibility of resource allocation and optimization within the organisation</p><h3 id=final-words>Final words</h3><p>It&rsquo;s a rich ecosystem with flexible and powerful parts. As a warning, there are strong opinions in how to configure certain things. You may require supplemental work depending on your org&rsquo;s requirements and what you want to accomplish.</p><p>So head over to the CNCF landscape and create the stack you like.</p></div><div class="row middle-xs"><div class=col-xs-12></div></div><div class=row><div class=col-xs-12></div></div><div class=releated-content><h3>Related Posts</h3><ul><li><a href=/posts/cloud-observability/>Understanding Observability (and the family) in Cloud Infrastructure</a></li></ul></div><div style=height:50px></div><div class=site-footer><div class=site-footer-item><a href=/about target=_blank>About</a></div><div class=site-footer-item><a href=https://github.com/namratachaudhary target=_blank>Github</a></div><div class=site-footer-item><a href=https://www.linkedin.com/in/namrata-c-542b8a56/ target=_blank>LinkedIn</a></div><div class=site-footer-item><a href=/index.xml target=_blank>RSS</a></div></div></div></div></article><script src=/js/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>